
# Normalization  (정규화)  

  * 테이블 상 데이터의 중복성(Redundancy)와 의존성(Dependancy)를 줄이기 위한 조직화 방법.  
  
## 함수적 종속성  
  X -> Y  

 * 함수적 종속성이란 위의 예와 같이 X가 Y를 결정할 때 X를 **결정자**, Y를 **종속자**라고 함.  
 * 이를 **Y는 X에 종속되어 있다.**  
 
 * 혹은 **X는 Y를 결정한다.**  
 
#### 예  
![스크린샷, 2020-01-15 20-23-21](https://user-images.githubusercontent.com/34915108/72430305-59a88700-37d5-11ea-904a-f59b09f058cf.png)
 
  * 위의 학생 릴레이션에서 (학번)을 통해 (이름)과 (학부)를 고유하게 구분할 수 있다.    
  즉, **이름 속성과 학부 속성은  학번에 함수적으로 종속되어 있다.**  
  
  * 이 때, 학번은 **결정자**, 이름과 학부 속성은 **종속자**.  
```
(학번) -> (이름, 학부)
```

#### 부분적 함수 종속성  

![스크린샷, 2020-01-15 20-27-51](https://user-images.githubusercontent.com/34915108/72430376-86f53500-37d5-11ea-90ea-e4519ad19353.png)

* 위의 테이블에서 속성 간의 함수적 종속성을 찾아보자.  

```
(학번, 과목코드) -> (성적)
(학번, 과목코드) -> (이름) 
(학번)         -> (이름)
```
  성적은 학번과 과목코드에 의해 결정되다. 
  
##### 부분 함수적 종속성 : 속성집합 Y가 속성집합 X의 전체가 아닌 일부분에도 종속되는 경우.  
  * 위의 경우 (이름) 속성은 (학번, 과목코드) 집합에 종속되면서 동시에 (학번)(일부분)에도 종속된다.  
  * **(이름)필드가 있기에 이 테이블은 부분 함수적 종속성이 발생**  
  
##### 완전 함수적 종속성 : 속성집합 Y가 속성집합 X의 전체에 대해서만 종속되는 경우.  
  * (성적)속성은 (학번, 과목코드) 속성집합에 의해서만 결정된다.  
  학번만으로는 이 테이블에서 성적 속성을 결정지을 수 없기 때문이다.  

 

## 1NF
 * 어떤 릴레이션이 Fist Normal Form을 만족하기 위해선, 다음의 필요조건을 충족.  
  ##### 1. 릴레이션에 속한 모든 속성의 필드는 하나의 값(원자)만 가져야 함.  

#### 예  
  * 과목코드 속성과 
![스크린샷, 2020-01-15 20-40-06](https://user-images.githubusercontent.com/34915108/72431054-41396c00-37d7-11ea-8596-c89eaa20fcd6.png)
  
![스크린샷, 2020-01-15 20-40-16](https://user-images.githubusercontent.com/34915108/72431056-426a9900-37d7-11ea-9cbb-8b5e3e66d1ef.png)


## 2NF  
  ##### 1. 1NF를 만족해야 한다.  
  ##### 2. 기본키에 대하여, 다른 모든 속성들은 완전 함수적 종속되어야 함.  ( = 부분 함수 종속성을 제거하여 달성)  
  
  #### 예  
  * **기본키가 하나의 키로 구성되면 2NF 그냥 만족**  
  ![스크린샷, 2020-01-15 20-44-01](https://user-images.githubusercontent.com/34915108/72431293-d2a8de00-37d7-11ea-90dc-1632fea27f32.png)

  * 기본키는 (학번, 과목코드)  | 이에 대하여 이 테이블의 함수적 종속성을 분석해보면   
  ```
  (학번, 과목코드) -> 성적
  (학번, 과목코드) -> 학부
  (학번, 과목코드) -> 등록금
  (학번)         -> 학부
  (학번)         -> 등록금
  ```
 * 이때, 기본키는 학부와 등록금 속성에 대해서 부분 함수적 종속성이 생기기에 이를 제거해야 함.  
 ### 이 때, 테이블을 나눈다. Vertical partitioning  
   * 학번만으로 (학부), (등록금) 속성을 결정지을 수 있기에 이들만을 위한 학생 테이블을 새로 만든다.  
   
 ![스크린샷, 2020-01-15 20-48-19](https://user-images.githubusercontent.com/34915108/72431538-65497d00-37d8-11ea-8792-42a5a0231c50.png)
 
 
 

## 3NF
   ##### 1. 2NF를 만족.  
   ##### 2. 모든 다른 속성들은 기본키에 대하여 **이행적 함수 종속성**을 가지면 안된다.  
   
#### Transitive Functional Dependancy  
   ```
   3단 논법에 의거, 
   X->Y
   Y->Z 이면
   
   추론 : X->Z
   
   이 때, Z는 X에 이행적으로 종속됨.
   ```

```
현재  위의 학생 릴레이션은 다음의 종속성을 지님.

(학번) -> (학부)
(학부) -> (등록금) 
(학번) -> (등록금)
```

  * 즉, (학번) -> (학부) 와 (학부) -> (등록금) 을 통해 (학번) -> (등록금) / X->Z 가 존재한다.  
  * [X, Y] [Y, Z] 라는 두 개의 테이블로 분리한다.  
  
  * [Update Anomaly] 3NF 전에는 컴퓨터공학과의 등록금이 변동되면  
  학생 테이블에서 두 개의 (등록금)필드를 갱신해야 했다. -> **데이터 불일치** 유발 가능.  
  * 3NF 후 등록금 변동 시 학부 테이블의 한 필드만 갱신하면 된다.  
  
![스크린샷, 2020-01-15 20-55-30](https://user-images.githubusercontent.com/34915108/72432002-63cc8480-37d9-11ea-82bb-bff009ac756c.png)





## 참고  

[참고](https://yaboong.github.io/database/2018/03/09/database-anomaly-and-functional-dependency/)    
